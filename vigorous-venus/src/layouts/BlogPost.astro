---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import FormattedDate from '../components/FormattedDate.astro';
import Header from '../components/Header.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
const path = Astro.url.pathname;
---

<html lang="en">
	<head>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;1,400&display=swap"
/>
		<BaseHead title={title} description={description} />
		<style>
			main {
				width: calc(100% - 2em);
				max-width: 100%;
				margin: 0;
			}
						/* nav is provided by shared Header component */

			.article {
			  max-width: 42rem;
			  margin-top: 8rem;
			  margin-left: 16rem;
			  margin-right: 0;
			  font-family: 'EB Garamond', serif;
			}

			.article-header h1 {
			  font-size: 1.6rem;
			  font-weight: normal;
			  margin-bottom: 0.5rem;
			}

			.description {
			  margin: 0;
			  color: #777;
			  font-size: 0.95rem;
			}

			.date {
			  margin-top: 0.2rem;
			  color: #999;
			  font-size: 0.85rem;
			}

			.content {
			  margin-top: 2.5rem;
			  line-height: 1.7;
			  font-size: 1rem;
			}
		</style>
	</head>

	<body>
		<main>
		  <Header />

		  <article class="article">
		    <header class="article-header">
		      <h1>{title}</h1>
		      {description && <p class="description">{description}</p>}
		      <p class="date">
		        <FormattedDate date={pubDate} />
		      </p>
		    </header>

		    <div class="content">
		      <slot />
		    </div>
		  </article>
		</main>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const nav = document.querySelector('.site-nav');
    if (!nav) return;

    function isMobile() {
      return window.innerWidth <= 768;
    }

    window.addEventListener('scroll', () => {
      if (!isMobile()) return;

      const currentScrollY = window.scrollY;

      // 只要离开顶部一定距离，就隐藏导航
      if (currentScrollY > 80) {
        nav.classList.add('is-hidden');
      }

      // 只有滚回接近顶部，才重新显示
      if (currentScrollY < 20) {
        nav.classList.remove('is-hidden');
      }
    });
  });
</script>
	</body>
</html>
